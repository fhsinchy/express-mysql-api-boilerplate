FROM node:lts

EXPOSE 3000

# necessary environment variables for testing #
ENV HOST=http://127.0.0.1
ENV PORT=3000
ENV COOKIE_SECRET=YgHrfXPWHhPDXkx5eeK7axB9rqOfKCCm
ENV ACCESS_TOKEN_SECRET=BCVk9YTk6v55v1KX3uZgbqNU2BCMDnbV
ENV REFRESH_TOKEN_SECRET=xp9OoUwtRezNuGJDlhrbu7UrbVCNqAdW
# end of necessary environment variables for testing #

WORKDIR /usr/app

COPY ./package.json .
RUN npm install

COPY . .

CMD [ "npm", "run", "test" ]